(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{"0e68":function(t,e,i){},"0eb3":function(t,e,i){"use strict";i("501f")},"501f":function(t,e,i){},"6f1d":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"column"},[i("g-search-tool-portal"),i("portal",{attrs:{to:"m-topbar-body",order:1}},[t.$route.query.seller?i("div",[t._v(t._s(t.$route.query.seller)+" Store")]):i("div",[t._v(t._s(t.category.pageTitle))])]),t.$route.query.seller?i("portal",{attrs:{to:"m-topbar-body",order:2}},[i("div",{staticClass:"text-caption text-primary ellipsis"},[t._v("\n      "+t._s(t.category.pageTitle)+"\n    ")])]):t._e(),t.$route.query.seller?i("portal",{attrs:{to:"m-topbar-left"}},[i("q-btn",{attrs:{flat:"",round:"",padding:"sm",size:"16px",color:"dark",icon:"arrow_back_ios"},on:{click:function(e){return e.stopPropagation(),t.$router.go(-1)}}})],1):t._e(),Object.entries(t.seoMeta).length?i("div",{staticClass:"order-last"},[i("g-screen-max",{attrs:{padding:""}},[i("div",{staticClass:"seo",domProps:{innerHTML:t._s(t.seoDescription)}})])],1):t._e(),i("div",{staticClass:"bg-light-secondary"},[i("div",{staticClass:"g-screen-container q-px-md q-pt-md-xl"},[t.$q.screen.gt.sm?i("div",{staticClass:"row"},[i("h2",{staticClass:"text-h4 q-ma-none"},[t._v("\n          "+t._s(t.category.pageTitle)+"\n        ")]),i("q-space"),i("div",[t.$q.screen.gt.sm&&t.$route.query.seller?i("q-btn",{attrs:{outline:"","no-caps":"",color:"primary",type:"a",href:t.sellerStoreUrl}},[t._v("\n            "+t._s(t.$t("button.seller_store",{seller:t.$route.query.seller}))+"\n          ")]):t._e()],1)],1):t._e()]),t.isAllowCrossSelling?i("div",{staticClass:"q-pt-lg",class:{"g-screen-container q-px-md":t.$q.screen.gt.sm},style:t.$q.screen.lt.md?"max-width: "+t.$q.screen.width+"px":""},[i("g-swiper",{attrs:{"slide-items":t.relatedItems,"item-per-view-xs":4,"item-per-view-sm":6,"item-per-view-md":8,"hide-pagination":""},scopedSlots:t._u([{key:"slideItem",fn:function(e){var s=e.item;return[i("div",{on:{mouseover:function(e){t.hoveredServiceId=s.service_id},mouseleave:function(e){t.hoveredServiceId=""},click:function(e){t.hoveredServiceId=""}}},[i("g-nav-tree-item",{attrs:{item:s,active:s.service_id===t.category.service_id||t.hoveredServiceId===s.service_id,"icon-size":t.$q.screen.gt.sm?"lg":"md"}})],1)]}}],null,!1,3333283443)})],1):t._e()]),i("g-offer-section"),t.relatedBrands.length?i("div",[i("g-screen-max",{staticClass:"q-px-md"},[i("q-separator"),i("div",{staticClass:"q-py-lg"},[i("div",{staticClass:"q-mb-sm"},[t._v("\n          "+t._s(t.$t("landing.related_brand"))+"\n        ")]),i("q-scroll-area",{staticClass:"g-scroll-area",style:{height:t.$q.screen.gt.xs?"auto":"48px "},attrs:{horizontal:"","content-style":{position:t.$q.screen.gt.xs?"relative !important":"absolute"}}},[i("div",{staticClass:"row q-gutter-sm q-pa-xs",class:{"no-wrap":t.$q.screen.lt.md}},t._l(t.relatedBrands,(function(e){return i("q-btn",{key:e.brand_id,staticClass:"g-shadow",attrs:{rounded:"",color:"white","text-color":"dark","no-caps":"","no-wrap":"",unelevated:"",to:t.constructRelatedBrandUrl(e.brand_id)}},[t._v("\n              "+t._s(t.$kwHelper.toName(e.brand_id))+"\n            ")])})),1)])],1),i("q-separator")],1)],1):t._e()],1)},r=[],n=(i("5319"),i("ddb0"),i("ded3")),o=i.n(n),a=i("2f62"),l=i("cb37"),c=i("51fb"),d=i("563e"),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"bg-light-secondary"},[i("div",{staticClass:"g-screen-container"},[t.loading.searchOffer?t._e():i("div",{staticClass:"q-px-md q-py-lg"},[i("g-category-search-filter-section")],1)])]),i("div",{staticClass:"g-screen-container q-py-lg"},[t.loading.searchOffer?i("div",{staticClass:"row q-col-gutter-md-md q-px-md-md"},t._l(12,(function(t){return i("div",{key:t,staticClass:"col-12 col-md-3"},[i("g-offer-item-skeleton")],1)})),0):0===t.offerTotal?i("div",{staticClass:"q-my-xl"},[t.$route.query.q||t.$route.query.fa||0===Number(t.$route.query.include_offline)?i("g-error-section",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n          "+t._s(t.$t("error.no_filtered_result[0]",{module:t.$t("error.offers")}))+"\n        ")]},proxy:!0},{key:"description",fn:function(){return[i("i18n",{attrs:{path:"error.no_filtered_result[1]",tag:"div"},scopedSlots:t._u([{key:"btn",fn:function(){return[i("span",{staticClass:"cursor-pointer",staticStyle:{"text-decoration":"underline"},on:{click:function(e){return t.onClearAllFilterItem()}}},[t._v("\n                "+t._s(t.$t("error.no_filtered_result[2]"))+"\n              ")])]},proxy:!0}],null,!1,4205195885)})]},proxy:!0}],null,!1,3477407926)}):i("g-error-section",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n          "+t._s(t.$t("error.no_initial_result[0]",{module:t.$t("error.offers")}))+"\n        ")]},proxy:!0},{key:"description",fn:function(){return[i("i18n",{attrs:{path:"error.no_initial_result[1]",tag:"div"},scopedSlots:t._u([{key:"btn",fn:function(){return[i("span",{staticClass:"cursor-pointer",staticStyle:{"text-decoration":"underline"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("\n                "+t._s(t.$t("error.no_initial_result[2]"))+"\n              ")])]},proxy:!0}])})]},proxy:!0}])})],1):i("div",[i("div",{staticClass:"q-px-md q-pb-md-md row items-center q-col-gutter-md"},[t.offerTotal>0?i("div",{staticClass:"col-auto"},[i("div",{staticClass:"text-secondary"},[t._v("\n            "+t._s(t.$tc("landing.offer_total_result",t.offerTotal,{n:t.$options.filters.formatNumber(t.offerTotal)}))+"\n          ")])]):t._e(),i("q-space"),"landing-category"===t.$route.name&&t.offerTotal>0?i("div",{staticClass:"col-auto"},[i("g-category-sort")],1):t._e()],1),t.$q.screen.lt.md?i("q-separator"):t._e(),i("div",{staticClass:"row q-col-gutter-md-md q-px-md-md"},t._l(t.offers,(function(t){return i("div",{key:t.offer_id,staticClass:"col-12 col-md-3"},[t.is_group_display?i("g-offer-group-item",{attrs:{item:t}}):i("g-offer-item",{attrs:{item:t}})],1)})),0),t.pagination.page===t.pagination.maxDisplay?i("div",{staticClass:"q-mt-lg text-center text-weight-bold text-italic"},[i("i18n",{attrs:{path:"landing.offer_omit_description"},scopedSlots:t._u([{key:"maxPage",fn:function(){return[t._v("\n            "+t._s(t.pagination.maxDisplay)+"\n          ")]},proxy:!0}],null,!1,3905101531)})],1):t._e(),t.pagination.max>1?i("div",{staticClass:"row justify-center q-mt-xl q-mb-lg"},[i("q-pagination",{attrs:{value:t.pagination.page,max:t.pagination.max,"max-pages":t.$q.screen.xs?5:7,"boundary-numbers":!0,"direction-links":!0,color:"dark"},on:{input:t.onPaginate}})],1):t._e()],1)])])},p=[],g=i("d994"),m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("g-search-filter-responsive",{scopedSlots:t._u([{key:"input",fn:function(){return[i("g-category-search-box")]},proxy:!0},{key:"filter",fn:function(){return[t.$q.screen.gt.sm?i("g-horizontal-scroll-area",[i("div",{staticClass:"row no-wrap"},[t.regions.length?i("q-btn",{staticClass:"g-btn-filter g-btn-min",attrs:{"text-color":t.$route.query.region_id?"dark":"secondary",unelevated:"","no-caps":""},on:{click:function(e){e.stopPropagation(),t.onChangeMenu("region"),t.onClearQ()}}},[i("div",{staticClass:"relative-position"},[i("div",[t._v("\n                "+t._s(t.$t("landing.region"))+"\n              ")]),t.$route.query.region_id?i("div",{staticClass:"g-round-indicator absolute bg-primary",staticStyle:{right:"-12px",top:"-2px"}}):t._e()])]):t._e(),t.loading.attributeBox?t._e():t._l(t.collections,(function(e){return i("div",{key:e.collection_id},[i("g-category-attribute-button",{attrs:{collection:e,isMenuOpen:t.menuId===e.collection_id},on:{"click:open":t.onChangeMenu,"click:close":t.onCloseDropdown}})],1)})),t.hasGroupOffer?t._e():i("q-btn",{staticClass:"g-btn-filter g-btn-min",attrs:{unelevated:"","no-caps":"","text-color":t.$route.query.budget_to?"dark":"secondary"},on:{click:function(e){return e.stopPropagation(),t.onChangeMenu("budget")}}},[i("div",{staticClass:"relative-position"},[i("div",[t._v("\n                "+t._s(t.$t("landing.budget_button"))+"\n              ")]),t.$route.query.budget_to?i("div",{staticClass:"g-round-indicator absolute bg-primary",staticStyle:{right:"-12px",top:"-2px"}}):t._e()])])],2)]):i("g-category-attribute-mobile",{attrs:{"has-group-offer":t.hasGroupOffer}})]},proxy:!0},t.hasGroupOffer?null:{key:"append",fn:function(){return[i("g-category-online-switch",{attrs:{value:Number(t.$route.query.include_offline)},on:{change:t.onToggleOnline}})]},proxy:!0}],null,!0)}),i("g-category-filter-chip",{staticClass:"q-mt-sm"}),["region","budget"].includes(t.menuId)&&t.$q.screen.gt.sm?i("q-drawer",{attrs:{side:"right",overlay:"",persistent:"",elevated:"",behavior:"desktop",width:300},model:{value:t.isDrawerOpened,callback:function(e){t.isDrawerOpened=e},expression:"isDrawerOpened"}},["region"===t.menuId?i("div",{directives:[{name:"click-outside-handler",rawName:"v-click-outside-handler",value:t.onCloseDropdown,expression:"onCloseDropdown"}],staticClass:"column fit"},[i("div",{staticClass:"col-auto"},[i("div",{staticClass:"q-pa-md"},[i("div",{staticClass:"text-h6 q-mb-md"},[t._v(t._s(t.$t("landing.region")))]),i("q-input",{attrs:{outlined:"",color:"primary","bg-color":"white","hide-bottom-space":"",placeholder:t.$t("offer.search")},scopedSlots:t._u([{key:"prepend",fn:function(){return[i("q-icon",{attrs:{name:"search"}})]},proxy:!0},{key:"append",fn:function(){return[t.form.q?i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(e){e.stopPropagation(),t.form.q=""}}}):t._e()]},proxy:!0}],null,!1,991009907),model:{value:t.form.q,callback:function(e){t.$set(t.form,"q",e)},expression:"form.q"}})],1),i("q-separator")],1),i("div",{staticClass:"col fit scroll"},[t.regionOptions.length?i("q-list",{attrs:{separator:""}},t._l(t.regionOptions,(function(e){return i("q-item",{key:e.region_id,staticClass:"text-dark",class:{"bg-light-secondary":e.region_id===t.$route.query.region_id},attrs:{clickable:"",to:{query:t.constructRegionUrl(e.region_id)}},nativeOn:{click:function(e){return t.onCloseDropdown.apply(null,arguments)}}},[i("q-item-section",[i("div",{staticClass:"row items-center"},[i("q-avatar",{staticClass:"g-avatar-outlined",attrs:{size:"20px"}},[i("q-icon",{attrs:{size:"20px",name:"img:img/region-flags/"+e.label.toLowerCase()+".svg"}})],1),i("span",{staticClass:"q-ml-sm"},[t._v(t._s(e.label))])],1)])],1)})),1):i("div",{staticClass:"row justify-center items-center full-width q-pa-md"},[i("div",{staticClass:"text-body2"},[t._v("\n            "+t._s(t.$t("error.no_result_found[0]"))+"\n          ")])])],1)]):t._e(),"budget"===t.menuId?i("div",{directives:[{name:"click-outside-handler",rawName:"v-click-outside-handler",value:t.onApplyBudget,expression:"onApplyBudget"}],staticClass:"fit column"},[i("div",{staticClass:"q-pa-md"},[i("div",{staticClass:"text-h6 q-pb-lg"},[t._v("\n          "+t._s(t.$t("landing.budget_button"))+"\n        ")]),i("g-input",{attrs:{outlined:"",color:"primary","bg-color":"white","hide-bottom-space":"",mode:"numeric",placeholder:t.$t("landing.budget_placeholder")},model:{value:t.form.budget_to,callback:function(e){t.$set(t.form,"budget_to",e)},expression:"form.budget_to"}})],1),i("q-space"),i("q-separator"),i("div",{staticClass:"row q-col-gutter-md q-pa-md"},[i("div",{staticClass:"col"},[i("q-btn",{staticClass:"full-width g-btn-outlined",staticStyle:{height:"36px"},attrs:{disable:!t.form.budget_to,"no-caps":"",outline:"",unelevated:""},on:{click:function(e){return e.preventDefault(),t.onClearBudget.apply(null,arguments)}}},[t._v("\n            "+t._s(t.$t("button.clear_all"))+"\n          ")])],1),i("div",{staticClass:"col"},[i("q-btn",{staticClass:"full-width",staticStyle:{height:"36px"},attrs:{"no-caps":"",unelevated:"",color:"primary"},on:{click:function(e){return e.preventDefault(),t.onApplyBudget.apply(null,arguments)}}},[t._v("\n            "+t._s(t.$t("button.apply"))+"\n          ")])],1)])],1):t._e()]):t._e()],1)},h=[],f={data(){return{form:{q:""},isRegionExpanded:!1,attributeOptions:[]}},computed:{expandedCounter(){return 12},regionOptions(){const{q:t}=this.form;if(t){const e=t.toLowerCase();return this.regions.filter((t=>t.label.toLowerCase().startsWith(e)))}return this.$q.screen.gt.sm||this.isRegionExpanded?this.regions:this.regions.slice(0,this.expandedCounter)},datasetOptions(){return t=>this.form.q||!0===t.isExpand?t.children:t.children.slice(0,this.expandedCounter)}},watch:{"form.q":{handler:function(t,e){this.filterAttributeOptions(t)}}},methods:{onClearQ(){this.$set(this.form,"q","")},onToggleRegionExpanded(){this.isRegionExpanded=!this.isRegionExpanded},filterAttributeOptions(t=""){const e=JSON.parse(JSON.stringify(this.partialAttributes));if(!t)return this.attributeOptions=e;if(this.attributeOptions.length&&!this.attributeOptions[0].children)return;const i=e.filter((function e(i){const s=new RegExp(`\\b${t}`,"i");return!(i.children.length||!i.value||!s.test(i.value))||(i.children.length?(i.children=i.children.filter(e)).length:void 0)}));console.log(i),this.attributeOptions=i},onToggleAttributeExpanded(t){this.$set(t,"isExpand",!t.isExpand)}}},_=i("fe96"),v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-input",{ref:"inputField",staticClass:"full-width",attrs:{borderless:"",dense:"",placeholder:t.$t("landing.find_offers"),debounce:"500",maxlength:"128",value:t.$route.query.q},on:{input:t.onAddRoute},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:function(e){return t.$refs.inputField.blur()}.apply(null,arguments)}}})},b=[],y=(i("498a"),{mixins:[c["a"]],methods:{async onAddRoute(t=""){if(!t.trim().length)return this.onRemoveFilterItem("q");t.trim().length<2||this.onAddFilterItem({q:t})}}}),q=y,x=i("2877"),C=i("27f9"),$=i("eebe"),w=i.n($),k=Object(x["a"])(q,v,b,!1,null,null,null),S=k.exports;w()(k,"components",{QInput:C["a"]});var O=function(){var t=this,e=t.$createElement,i=t._self._c||e;return Object.entries(t.collection).length?i("div",[t.isDisabled?i("q-tooltip",{attrs:{anchor:"top middle",self:"center left","auto-close":""}},[t._v("\n    "+t._s(t.$t("landing.region_validation_message"))+"\n  ")]):t._e(),i("q-btn",{staticClass:"g-btn-filter g-btn-min",attrs:{disable:t.isDisabled,"no-caps":"",unelevated:"","text-color":t.hasFilterChip?"dark":"secondary"},on:{click:function(e){return e.stopPropagation(),t.onClickButton(t.collection.collection_id)}}},[i("div",{staticClass:"relative-position"},[i("div",[t._v("\n        "+t._s(t.collection.label[t.$i18n.locale]||t.collection.label["en"])+"\n      ")]),t.hasFilterChip?i("div",{staticClass:"g-round-indicator absolute bg-primary",staticStyle:{right:"-12px",top:"-2px"}}):t._e()])]),t.isMenuOpen&&t.$q.screen.gt.sm?i("q-drawer",{directives:[{name:"click-outside-handler",rawName:"v-click-outside-handler",value:t.onClickOutside,expression:"onClickOutside"}],attrs:{side:"right",overlay:"",persistent:"",elevated:"",behavior:"desktop",width:500},model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},[i("div",{staticClass:"fit column"},[i("div",{staticClass:"col-auto"},[i("div",{staticClass:"q-pa-md"},[i("div",{staticClass:"text-h6 q-mb-lg"},[t._v("\n            "+t._s(t.collection.label[t.$i18n.locale]||t.collection.label["en"])+"\n          ")]),i("q-input",{attrs:{outlined:"",dense:"",placeholder:t.$t("common.type_to_filter")},scopedSlots:t._u([{key:"prepend",fn:function(){return[i("q-icon",{attrs:{name:"search"}})]},proxy:!0},{key:"append",fn:function(){return[t.form.q?i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(e){e.stopPropagation(),t.form.q=""}}}):t._e()]},proxy:!0}],null,!1,991009907),model:{value:t.form.q,callback:function(e){t.$set(t.form,"q",e)},expression:"form.q"}})],1),i("q-separator")],1),i("div",{staticClass:"scroll",staticStyle:{flex:"1"}},[t.attributeOptions.length?[t._l(t.attributeOptions,(function(e,s){return[s>0?i("q-separator",{key:"separator_"+e.value,attrs:{inset:""}}):t._e(),i("div",{key:e.value,staticClass:"q-pa-md"},[i("div",{staticClass:"text-body2 text-weight-medium q-pb-md"},[t._v("\n                "+t._s(e.value)+"\n              ")]),i("div",{staticClass:"row q-col-gutter-md"},[t._l(t.datasetOptions(e),(function(e){return i("div",{key:e.dataset_id,staticClass:"col-6"},[i("q-checkbox",{staticStyle:{"align-items":"flex-start !important"},attrs:{val:e.dataset_id,dense:""},model:{value:t.draftIds,callback:function(e){t.draftIds=e},expression:"draftIds"}},[i("div",{staticClass:"text-body2",staticStyle:{"margin-top":"2px"}},[t._v("\n                      "+t._s(e.value)+"\n                    ")])])],1)})),!t.form.q&&e.children.length>t.expandedCounter?i("div",{staticClass:"col-12"},[i("g-plain-button",{on:{click:function(i){return t.onToggleAttributeExpanded(e)}}},[t._v("\n                    "+t._s(e.isExpand?t.$t("button.view_less"):t.$t("button.view_n_more",{n:e.children.length-t.expandedCounter}))+"\n                  ")])],1):t._e()],2)])]}))]:i("div",{staticClass:"row justify-center items-center full-width q-pa-md"},[i("div",{staticClass:"text-body2"},[t._v("\n            "+t._s(t.$t("error.no_result_found[0]"))+"\n          ")])])],2),i("div",{staticClass:"col-auto"},[i("q-separator"),i("div",{staticClass:"q-pa-md row q-col-gutter-md"},[i("div",{staticClass:"col"},[i("q-btn",{staticClass:"full-width g-btn-outlined",staticStyle:{height:"36px"},attrs:{"no-caps":"",outline:"",disable:!t.draftIds.length},on:{click:function(e){return e.preventDefault(),t.onClearAllAttribute.apply(null,arguments)}}},[t._v("\n              "+t._s(t.$t("button.clear_all"))+"\n            ")])],1),i("div",{staticClass:"col"},[i("q-btn",{staticClass:"full-width",staticStyle:{height:"36px"},attrs:{"no-caps":"",color:"primary",unelevated:""},on:{click:function(e){return e.preventDefault(),t.onApplyAttribute.apply(null,arguments)}}},[t._v("\n              "+t._s(t.$t("button.apply"))+"\n            ")])],1)])],1)])]):t._e()],1):t._e()},I=[],A=(i("5db7"),i("73d9"),{mixins:[f,c["a"]],props:{isMenuOpen:{type:Boolean,default:!1},collection:{type:Object,default(){return{}}}},data(){return{draftIds:[],isOpen:!1}},computed:o()(o()({},Object(a["c"])({collections:t=>t.landing.collections})),{},{isDisabled(){return!("children"in this.collection)},partialAttributes(){if(this.isDisabled)return[];const{children:t}=this.collection;return JSON.parse(JSON.stringify(t))},hasFilterChip(){if(this.isDisabled)return!1;const{collection_id:t}=this.collection,e=this.collection.children.flatMap((t=>t.children)),i=this.decodedAttribute[t];if(!i)return!1;const s=e.some((t=>i.some((e=>e===t.dataset_id))));return s}}),watch:{isMenuOpen(t){setTimeout((()=>{this.isOpen=t,this.$store.commit("landing/updateOverlayDetail",{isShow:t})}),200)}},methods:{async onClickOutside(){await this.onApplyAttribute()},async onClickButton(t){this.isMenuOpen?await this.onClickOutside():(this.$set(this.form,"q",""),this.draftIds=this.decodedAttribute[t]||[],this.filterAttributeOptions(),this.$emit("click:open",t))},onApplyAttribute(){const{collection_id:t}=this.collection,e=o()(o()({},this.decodedAttribute),{},{[t]:this.draftIds}),i=this.encodeAttribute(e);try{if(i===this.selectedFa)throw new Error("Attribute no changes.");if(!this.hasFilterChip&&!this.draftIds.length)throw new Error("Attribute is empty.")}catch(s){return this.$emit("click:close")}this.onAddFilterItem({fa:i}),this.$emit("click:close")},onClearAllAttribute(){this.draftIds=[],this.onApplyAttribute()}}}),T=A,Q=i("05c0"),R=i("9c40"),N=i("9404"),D=i("0016"),F=i("eb85"),j=i("8f8e"),B=Object(x["a"])(T,O,I,!1,null,null,null),E=B.exports;w()(B,"components",{QTooltip:Q["a"],QBtn:R["a"],QDrawer:N["a"],QInput:C["a"],QIcon:D["a"],QSeparator:F["a"],QCheckbox:j["a"]});var G=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"row q-gutter-md"},[i("div",{staticClass:"col-auto"},[i("q-btn",{attrs:{round:"",unelevated:"",size:"md"},on:{click:t.open}},[i("div",{staticClass:"relative-position"},[i("q-icon",{attrs:{name:"filter_list",color:"secondary"}}),t.countLabel?i("div",{staticClass:"g-round-indicator bg-primary absolute",staticStyle:{"border-radius":"50%",top:"-4px",right:"-4px"}}):t._e()],1)])],1)]),i("g-dialog",{ref:"dialogFilter",attrs:{persistent:"",maximized:"","no-body-padding":"","transition-show":"slide-left","transition-hide":"slide-right",loading:t.loading.attributeBox},scopedSlots:t._u([{key:"title",fn:function(){return[i("span",{staticClass:"text-body1"},[t._v(t._s(t.$t("button.filter")))])]},proxy:!0},{key:"body",fn:function(){return[i("div",{staticStyle:{"padding-top":"50px"}}),t.regions.length?[i("q-card-section",{staticClass:"bg-light-secondary text-body1 row justify-between q-mb-xs"},[i("div",[t._v(t._s(t.$t("landing.region")))]),t.region_id?i("div",{staticClass:"row items-center",on:{click:function(e){t.isHideRegion=!t.isHideRegion}}},[i("q-avatar",{staticClass:"g-avatar-outlined",attrs:{size:"20px"}},[i("q-icon",{attrs:{size:"20px",name:"img:img/region-flags/"+t.selectedRegion.label.toLowerCase()+".svg"}})],1),i("span",{staticClass:"q-ml-sm"},[t._v(t._s(t.selectedRegion.label))]),i("q-icon",{staticClass:"q-ml-sm",attrs:{name:t.isHideRegion?"expand_more":"expand_less"}})],1):t._e()]),t.isHideRegion?t._e():[t.regionOptions.length?i("q-card-section",{staticClass:"row q-col-gutter-md q-pa-md"},t._l(t.regionOptions,(function(e){return i("div",{key:e.region_id,staticClass:"col-6 row items-center q-gutter-x-md"},[i("q-radio",{attrs:{value:t.region_id,val:e.region_id,dense:""},on:{input:function(i){return t.onToggleRegion(e.region_id)}}}),i("div",{staticClass:"row items-center"},[i("q-avatar",{staticClass:"g-avatar-outlined",attrs:{size:"20px"}},[i("q-icon",{attrs:{size:"20px",name:"img:img/region-flags/"+e.label.toLowerCase()+".svg"}})],1),i("span",{staticClass:"q-ml-sm"},[t._v(t._s(e.label))])],1)],1)})),0):i("div",{staticClass:"row justify-center items-center",staticStyle:{"min-height":"100px"}},[i("div",{staticClass:"text-body2"},[t._v("\n              "+t._s(t.$t("error.no_result_found[0]"))+"\n            ")])]),t.regions.length>t.expandedCounter&&!t.form.q?i("div",{staticClass:"q-pb-md q-px-md"},[i("g-plain-button",{on:{click:t.onToggleRegionExpanded}},[t._v("\n              "+t._s(t.isRegionExpanded?t.$t("button.view_less"):t.$t("button.view_n_more",{n:t.regions.length-t.expandedCounter}))+"\n            ")])],1):t._e()]]:t._e(),t.attributeOptions.length&&!t.loading.attributeBox?t._l(t.attributeOptions,(function(e){return i("div",{key:e.collection_id},[i("q-card-section",{staticClass:"bg-light-secondary text-body1 q-mb-xs row justify-between items-center"},[i("div",[t._v("\n              "+t._s(e.label[t.$i18n.locale]||e.label["en"])+"\n            ")]),t.isSelectedRegion?t._e():i("div",{staticClass:"text-body2 text-secondary"},[t._v("\n              "+t._s(t.$t("landing.region_validation_message"))+"\n            ")])]),t._l(e.children,(function(s,r){return i("div",{key:s.value},[r>0?i("q-separator",{key:"separator_"+s.value,attrs:{inset:""}}):t._e(),e.children.length>1?i("q-card-section",{staticClass:"q-pb-none text-body2 text-weight-medium"},[t._v("\n              "+t._s(s.value)+"\n            ")]):t._e(),i("q-card-section",{staticClass:"text-body2"},[i("div",{staticClass:"row q-col-gutter-md"},[t._l(t.datasetOptions(s),(function(s){return i("div",{key:s.dataset_id,staticClass:"col-6"},[i("q-checkbox",{staticStyle:{"align-items":"flex-start !important"},attrs:{value:e.collection_id in t.attribute&&t.attribute[e.collection_id].includes(s.dataset_id),val:s.dataset_id,dense:""},on:{input:function(e){return t.onToggleAttribute(s)}}},[i("div",{staticClass:"text-body2",staticStyle:{"margin-top":"2px"}},[t._v("\n                      "+t._s(s.value)+"\n                    ")])])],1)})),!t.form.q&&s.children.length>t.expandedCounter?i("div",{staticClass:"col-12"},[i("g-plain-button",{on:{click:function(e){return t.onToggleAttributeExpanded(s)}}},[t._v("\n                    "+t._s(s.isExpand?t.$t("button.view_less"):t.$t("button.view_n_more",{n:s.children.length-t.expandedCounter}))+"\n                  ")])],1):t._e()],2)])],1)}))],2)})):!t.storeAttributes.length||t.attributeOptions.length||t.loading.attributeBox||t.regions.length?t._e():i("div",{staticClass:"row justify-center items-center",staticStyle:{"min-height":"100px"}},[i("div",{staticClass:"text-body2"},[t._v("\n          "+t._s(t.$t("error.no_result_found[0]"))+"\n        ")])]),t.hasGroupOffer?t._e():[i("div",[i("q-card-section",{staticClass:"bg-light-secondary text-body1 text-weight-medium"},[t._v("\n            "+t._s(t.$t("landing.budget_button"))+"\n          ")]),i("q-card-section",[i("q-input",{staticClass:"full-width",attrs:{outlined:"",dense:"",color:"primary","bg-color":"white",placeholder:t.$t("landing.budget_placeholder"),mask:"#","reverse-fill-mask":""},model:{value:t.budget_to,callback:function(e){t.budget_to=e},expression:"budget_to"}})],1)],1),i("q-separator"),i("q-card-section",[i("g-category-online-switch",{attrs:{value:t.include_offline},on:{change:t.onToggleOnline}})],1)],i("q-page-sticky",{staticStyle:{"z-index":"1","margin-bottom":"50px"},attrs:{expand:"",position:"top"}},[i("q-toolbar",{staticClass:"q-py-none q-px-md bg-white g-shadow"},[i("q-input",{staticClass:"full-width",attrs:{dense:"",borderless:"",placeholder:t.$t("common.type_to_filter")},scopedSlots:t._u([{key:"prepend",fn:function(){return[i("q-icon",{attrs:{name:"search"}})]},proxy:!0},{key:"append",fn:function(){return[t.form.q?i("div",{staticClass:"text-caption text-secondary cursor-pointer",on:{click:function(e){t.form.q=""}}},[t._v("\n                "+t._s(t.$t("button.clear"))+"\n              ")]):t._e()]},proxy:!0}]),model:{value:t.form.q,callback:function(e){t.$set(t.form,"q",e)},expression:"form.q"}})],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[i("div",{staticClass:"row q-col-gutter-md"},[i("div",{staticClass:"col"},[i("q-btn",{staticClass:"full-width",attrs:{outline:"","no-caps":"",color:"primary"},on:{click:function(e){return t.onClearAll()}}},[t._v("\n            "+t._s(t.$t("button.clear_all"))+"\n          ")])],1),i("div",{staticClass:"col"},[i("q-btn",{staticClass:"full-width",attrs:{"no-caps":"",unelevated:"",color:"primary"},on:{click:function(e){return t.onApply()}}},[t._v("\n            "+t._s(t.$t("button.apply"))+"\n          ")])],1)])]},proxy:!0}])}),i("g-dialog-alert",{ref:"dialogAlert",attrs:{message:t.$t("landing.region_validation_message")}})],1)},H=[],P=(i("0481"),i("4069"),i("d40d")),L=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row items-center"},[i("span",{staticClass:"q-mr-sm"},[t._v(t._s(t.$t("landing.online_seller")))]),i("q-space"),i("div",{staticClass:"switch-main-2"},[i("div",{staticClass:"toggle"},[i("input",{staticClass:"check",attrs:{type:"checkbox"},domProps:{checked:0===t.value},on:{click:t.onToggle}}),i("b",{staticClass:"b switch"}),i("b",{staticClass:"b track"})])])],1)},z=[],M={mixins:[c["a"]],props:{value:{type:Number,default:1}},methods:{onToggle(){const t=0===this.value?1:0;this.$emit("change",t)}}},U=M,J=(i("8d17"),i("2c91")),W=Object(x["a"])(U,L,z,!1,null,"67039cd8",null),V=W.exports;w()(W,"components",{QSpace:J["a"]});var K={mixins:[f,c["a"]],components:{GDialogAlert:P["a"],GCategoryOnlineSwitch:V},props:{hasGroupOffer:{type:Boolean}},data(){return{isFirstLoaded:!1,isHideRegion:!1,partialAttributes:[],attribute:{},region_id:"",budget_to:"",include_offline:""}},computed:o()(o()({},Object(a["c"])({storeAttributes:t=>t.landing.collections,regions:t=>t.landing.regions,loading:t=>t.util.loading})),{},{selectedRegion(){if(!this.region_id)return{};const t=this.regions.find((t=>t.region_id===this.region_id));return t},isSelectedRegion(){return!this.regions.length||!!(this.regions.length>0&&this.region_id)},countLabel(){const{region_id:t,budget_to:e,include_offline:i}=this.$route.query,s=Object.values(this.decodedAttribute).flat().length,r=!!t,n=!!e,o=0===Number(i),a=s+r+n+o;return a?`(${a})`:""}}),watch:{storeAttributes:{handler(){this.partialAttributes=JSON.parse(JSON.stringify(this.storeAttributes)),this.filterAttributeOptions()},deep:!0,immediate:!0},"$route.params.seoTerm"(){this.isFirstLoaded=!1}},methods:{open(){this.$refs.dialogFilter.open();const{region_id:t="",budget_to:e,include_offline:i}=this.$route.query;this.budget_to=e,this.include_offline=Number(i||1),this.onPreSelectAttribute(),t!==this.region_id&&this.onToggleRegion(t)},async onToggleRegion(t){this.region_id=t,this.isHideRegion=!!t,this.onFetchAttributes()},async onFetchAttributes(){this.attribute={};const t=this.$kwHelper.findCategory(this.$route.params.seoTerm),{service_id:e,brand_id:i}=t,s={service_id:e,brand_id:i};this.isSelectedRegion&&(s.region_id=this.region_id),await this.$store.dispatch("landing/fetchAttributes",s),this.filterAttributeOptions(),this.onPreSelectAttribute(),this.isFirstLoaded=!0},onPreSelectAttribute(){const{seoTerm:t}=this.$route.params,e=l["b"].viewSeoFilterDetail(t),{region_id:i=""}=e;i===this.region_id&&(this.attribute=JSON.parse(JSON.stringify(this.decodedAttribute)))},onToggleAttribute(t){const{collection_id:e,dataset_id:i}=t,s=this.attribute[e]||[],r=s.indexOf(i);return r>-1?s.splice(r,1):s.push(i),s.length?this.$set(this.attribute,e,s):this.$delete(this.attribute,e)},onToggleOnline(t){this.include_offline=t},async onApply(){const{region_id:t="",attribute:e,budget_to:i,include_offline:s}=this,r=this.$route.query.region_id===t,n=this.encodeAttribute(e),o=n===this.selectedFa,a=this.$route.query.budget_to===i,l=Number(this.$route.query.include_offline||1)===s;if(r&&o&&a&&l)return this.$refs.dialogFilter.close();this.onAddFilterItem({region_id:t,fa:n,budget_to:i,include_offline:s}),this.$refs.dialogFilter.close()},onClearAll(){return this.onRemoveFilterItem(["region_id","fa","budget_to","include_offline"]),this.$refs.dialogFilter.close()}}},X=K,Y=i("a370"),Z=i("cb32"),tt=i("3786"),et=i("de5e"),it=i("65c6"),st=Object(x["a"])(X,G,H,!1,null,null,null),rt=st.exports;w()(st,"components",{QBtn:R["a"],QIcon:D["a"],QCardSection:Y["a"],QAvatar:Z["a"],QRadio:tt["a"],QSeparator:F["a"],QCheckbox:j["a"],QInput:C["a"],QPageSticky:et["a"],QToolbar:it["a"]});var nt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row items-center"},[t.$route.query.q?i("q-chip",{staticClass:"text-body2",attrs:{label:t.$t("landing.search_chip",{q:t.$route.query.q}),removable:"",color:"blue-1"},on:{remove:function(e){return t.onRemoveFilterItem("q")}}}):t._e(),0===Number(t.$route.query.include_offline)?i("q-chip",{staticClass:"text-body2",attrs:{label:t.$t("landing.online_seller"),removable:"",color:"green-1"},on:{remove:function(e){return t.onRemoveFilterItem("include_offline")}}}):t._e(),t.regionLabel?i("q-chip",{staticClass:"text-body2",attrs:{label:t.regionLabel,removable:"",color:"grey-3"},on:{remove:function(e){return t.onRemoveFilterItem(["region_id","fa"])}}}):t._e(),t.filteredChips.length?t._l(t.filteredChips,(function(e){return i("q-chip",{key:e.dataset_id,staticClass:"text-body2",attrs:{label:e.label,"text-color":"Deleted"===e.label?"secondary":"",removable:"",color:"grey-3"},on:{remove:function(i){return t.onRemoveDataset(e)}}})})):t._e(),t.$route.query.budget_to?i("q-chip",{staticClass:"text-body2",attrs:{label:t.$t("landing.budget_chip",{price:t.$commonFn.formatNumber(t.$route.query.budget_to),currencyCode:t.regionalDetail.currencyCode}),removable:"",color:"grey-3"},on:{remove:function(e){return t.onRemoveFilterItem("budget_to")}}}):t._e(),t.isShowClearAll?i("g-plain-button",{on:{click:function(e){return t.onClearAllFilterItem()}}},[t._v("\n    "+t._s(t.$t("button.clear_all"))+"\n  ")]):t._e()],2)},ot=[],at={mixins:[c["a"]],computed:o()(o()({},Object(a["c"])({regionalDetail:t=>t.auth.regionalDetail,regions:t=>t.landing.regions,collections:t=>t.landing.collections})),{},{isShowClearAll(){const{q:t,budget_to:e}=this.$route.query;return t||e||this.regionLabel||this.filteredChips.length},regionLabel(){const{region_id:t}=this.$route.query,e=this.regions.find((e=>e.region_id===t));return e?this.$t("landing.region_chip",{region:e.label}):""},filteredChips(){const t=this.collections.map((t=>t));if(!t.some((t=>"children"in t)))return[];const e=t.flatMap((t=>t.children)).flatMap((t=>t.children));if(!e.length)return[];const i=[];for(const[s,r]of Object.entries(this.decodedAttribute))for(const t of r){const r=e.find((e=>e.dataset_id===t));i.push({collection_id:s,label:r?r.value:"Deleted",dataset_id:t})}return i}}),methods:{onRemoveDataset(t){const{collection_id:e}=t,i=this.decodedAttribute[e],s=i.filter((e=>e!==t.dataset_id)),r=o()(o()({},this.decodedAttribute),{},{[e]:s}),n=this.encodeAttribute(r);this.onAddFilterItem({fa:n})}}},lt=at,ct=i("b047"),dt=Object(x["a"])(lt,nt,ot,!1,null,null,null),ut=dt.exports;w()(dt,"components",{QChip:ct["a"]});var pt=i("f0f4"),gt={mixins:[c["a"],f],components:{GSearchFilterResponsive:_["a"],GCategorySearchBox:S,GCategoryAttributeButton:E,GCategoryAttributeMobile:rt,GCategoryOnlineSwitch:V,GCategoryFilterChip:ut,GHorizontalScrollArea:pt["a"]},data(){return{menuId:"",form:{budget_to:""},isDrawerOpened:!1}},computed:o()(o()({},Object(a["c"])({loading:t=>t.util.loading,collections:t=>t.landing.collections,regions:t=>t.landing.regions})),{},{hasGroupOffer(){const{service_id:t}=this.$kwHelper.findCategory(this.$route.params.seoTerm),{system_settings:e}=this.$store.getters["landing/viewServiceSetting"](t);return null===e||void 0===e?void 0:e.is_group_offer_display}}),methods:{constructRegionUrl(t){const{seller:e}=this.$route.query;return o()({region_id:t},e&&{seller:e})},async onChangeMenu(t){this.menuId!==t?("budget"===t&&(this.form.budget_to=this.$route.query.budget_to),this.$nextTick((()=>{this.menuId=t,setTimeout((()=>{this.isDrawerOpened=!0,this.$store.commit("landing/updateOverlayDetail",{isShow:!0})}),200)}))):await this.onCloseDropdown()},onCloseDropdown(){this.menuId="",setTimeout((()=>{this.isDrawerOpened=!1,this.$store.commit("landing/updateOverlayDetail",{isShow:!1})}),200)},onApplyBudget(){const{budget_to:t}=this.form;try{if(t===this.$route.query.budget_to)throw new Error("Budget duplicated.");if(!t)throw new Error("Budget is empty.")}catch(i){this.onCloseDropdown()}const e={budget_to:Number(t)};this.onAddFilterItem(e),this.onCloseDropdown()},onClearBudget(){this.$set(this.form,"budget_to",""),this.onApplyBudget()},onToggleOnline(t){if(0===t)return this.onAddFilterItem({include_offline:0});this.onRemoveFilterItem("include_offline")}}},mt=gt,ht=i("1c1c"),ft=i("66e5"),_t=i("4074"),vt=Object(x["a"])(mt,m,h,!1,null,null,null),bt=vt.exports;w()(vt,"components",{QBtn:R["a"],QDrawer:N["a"],QInput:C["a"],QIcon:D["a"],QSeparator:F["a"],QList:ht["a"],QItem:ft["a"],QItemSection:_t["a"],QAvatar:Z["a"],QSpace:J["a"]});var yt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.$q.screen.gt.sm?i("div",{staticClass:"row justify-end"},[i("div",{staticClass:"q-gutter-sm"},t._l(t.sortOptions,(function(e){return i("q-radio",{key:e.name,attrs:{dense:"",value:t.selectedSort,val:e.name,label:e[t.$i18n.locale]},on:{input:function(i){return t.onSort(e.name)}}})})),1)]):i("div",[i("q-btn",{attrs:{"no-caps":"",flat:"",padding:"0","icon-right":"expand_more",color:"dark",ripple:!1},on:{click:function(e){return t.$refs.dialogSort.open()}}},[t._v("\n      "+t._s(t.sortValLabel)+"\n    ")]),i("g-dialog-bottom",{ref:"dialogSort",scopedSlots:t._u([{key:"body",fn:function(){return[i("q-list",[i("q-item-label",{staticClass:"row items-center",attrs:{header:""}},[i("q-icon",{attrs:{name:"sort",size:"20px"}}),i("span",{staticClass:"q-ml-sm"},[t._v(t._s(t.$t("common.sort_by")))])],1),t._l(t.sortOptions,(function(e){return i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.name,class:[t.selectedSort===e.name?"text-primary":""],attrs:{clickable:"",disable:t.selectedSort===e.name},on:{click:function(i){return t.onSort(e.name)}}},[i("q-item-section",[t._v("\n              "+t._s(e[t.$i18n.locale])+"\n            ")])],1)}))],2)]},proxy:!0}])})],1)])},qt=[],xt=i("8ea7"),Ct={mixins:[c["a"]],components:{GDialogBottom:xt["a"]},computed:{sortValLabel(){const t=this.sortOptions.find((t=>t.name===this.selectedSort));return t?t[this.$i18n.locale]:""}},methods:{onSort(t){this.onAddFilterItem({sort:t})}}},$t=Ct,wt=i("0170"),kt=i("714f"),St=Object(x["a"])($t,yt,qt,!1,null,null,null),Ot=St.exports;w()(St,"components",{QRadio:tt["a"],QBtn:R["a"],QList:ht["a"],QItemLabel:wt["a"],QIcon:D["a"],QItem:ft["a"],QItemSection:_t["a"]}),w()(St,"directives",{Ripple:kt["a"]});var It=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"rounded-borders cursor-pointer",class:{"g-border-light":t.$q.screen.gt.sm}},[i("div",{staticClass:"q-pa-md"},[i("q-skeleton",{staticClass:"text-body1",attrs:{type:"text",width:t.$commonFn.genRandomNum(60,90)+"%"}}),i("q-skeleton",{staticClass:"text-body1",attrs:{type:"text",width:t.$commonFn.genRandomNum(10,50)+"%"}})],1),i("div",{staticClass:"q-pa-md row q-gutter-md text-body-2"},[i("q-skeleton",{attrs:{width:"20%",type:"text"}}),i("q-skeleton",{attrs:{width:"20%",type:"text"}}),i("q-space"),i("q-skeleton",{attrs:{width:"20%",type:"text"}})],1),i("div",{staticClass:"row q-px-md q-pb-md items-center"},[i("q-skeleton",{attrs:{type:"QAvatar",size:"30px"}}),i("div",{staticClass:"col q-pl-sm"},[i("q-skeleton",{staticClass:"text-body2",attrs:{type:"text",width:"70%",animation:"fade"}}),i("q-skeleton",{staticClass:"text-body2",attrs:{type:"text",width:"40%",animation:"fade"}})],1),i("q-space"),i("div",{staticClass:"col-md-4"},[i("q-skeleton",{attrs:{type:"text",animation:"fade"}})],1)],1),t.$q.screen.lt.md?i("q-separator"):t._e()],1)},At=[],Tt=i("293e"),Qt={},Rt=Object(x["a"])(Qt,It,At,!1,null,null,null),Nt=Rt.exports;w()(Rt,"components",{QSkeleton:Tt["a"],QSpace:J["a"],QSeparator:F["a"]});var Dt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"full-height"},[i("a",{staticClass:"full-height column rounded-borders cursor-pointer g-card-no-deco",class:{"g-card-hover g-border-light":t.$q.screen.gt.sm},attrs:{href:t.customRoute},on:{click:t.onNavigate}},[t.offerImageSrc?i("div",{staticClass:"q-px-md q-pt-md"},[i("q-img",{staticStyle:{height:"150px"},attrs:{src:t.offerImageSrc,contain:""},scopedSlots:t._u([{key:"error",fn:function(){return[i("q-img",{staticClass:"g-img-error bg-white",staticStyle:{height:"150px"},attrs:{src:t.defaultImageSrc,contain:""}})]},proxy:!0}],null,!1,3224983516)})],1):t._e(),i("div",{staticClass:"q-pa-md q-pb-lg"},[i("div",{staticClass:"text-body1 ellipsis-2-lines"},[t.item.region_id?i("q-avatar",{staticClass:"g-avatar-outlined q-mr-xs",attrs:{size:"12px"}},[i("q-icon",{attrs:{size:"12px",name:"img:img/region-flags/"+t.$options.filters.toLowerCase(t.$kwHelper.toName(t.item.region_id,"en"))+".svg"}})],1):t._e(),i("span",[t._v("\n          "+t._s(t.offerTitle)+"\n        ")])],1)]),i("q-space"),i("div",{staticClass:"q-px-md q-pb-md row items-center"},[i("div",{staticClass:"g-chip-counter"},[t._v("\n        "+t._s(t.$tc("landing.offer_count",t.item.total_offer,{n:t.$options.filters.formatNumber(t.item.total_offer)}))+"\n      ")]),i("q-space"),i("div",{staticClass:"row items-baseline q-gutter-xs text-body1"},[i("span",{staticClass:"text-secondary"},[t._v("\n          "+t._s(t.$t("landing.from_price"))+"\n        ")]),i("span",[t._v("\n          "+t._s(t._f("formatNumber")(t.item.display_price))+"\n        ")]),i("span",{staticClass:"text-caption"},[t._v("\n          "+t._s(t.item.display_currency)+"\n        ")])])],1)],1),t.$q.screen.lt.sm?i("q-separator"):t._e()],1)},Ft=[],jt=(i("2b3d"),{props:{item:Object},computed:{defaultImageSrc(){return i("841f")},offerImageSrc(){const{gallery_images:t}=this.item;return t?t[0]?t[0]:this.defaultImageSrc:null},offerTitle(){const{title:t}=this.item,e=t.replace(/&amp;/g,"&");return e.replace(/&gt;/g,">")},isGcOffer(){const{offer_id:t}=this.item;return t.startsWith("G")},customRoute(){const{service_id:t,brand_id:e,region_id:i,title:s="-",filter_attributes:r,offer_group_attributes:n}=this.item,{q:a=""}=this.$route.query,l=o()(o()({},r),n);let c=Object.entries(l).filter((([t,e])=>e&&e.length));c=c.map((([t,e])=>`${t}:${e.toString()}`));const d=c.join("|");let u="";if(this.isGcOffer){const s=this.$kwHelper.toSeoTerm(t,e),r=this.iconicPath({name:"precheckout-group",params:{seoTerm:s},query:o()(o()({},i&&{region_id:i}),{},{fa:d},a&&{q:a})}),n=this.$router.resolve(r);u=n.href}else{const r=s.replace(/[\W]/g,"-"),n=o()(o()({service_id:t,brand_id:e},i&&{region_id:i}),{},{fa:d},a&&{q:a}),l=new URLSearchParams(n).toString();u=`https://www.g2g.com/offer/${r}?${l}`}return u}},methods:{onNavigate(t){this.isGcOffer&&(t.preventDefault(),this.$router.push(this.customRoute))}}}),Bt=jt,Et=(i("0eb3"),i("068f")),Gt=Object(x["a"])(Bt,Dt,Ft,!1,null,"79c56195",null),Ht=Gt.exports;w()(Gt,"components",{QImg:Et["a"],QAvatar:Z["a"],QIcon:D["a"],QSpace:J["a"],QSeparator:F["a"]});var Pt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"full-height full-width position-relative"},[i("div",{staticClass:"absolute text-red",staticStyle:{"z-index":"1",right:"-6px",top:"-12px"}},[t._t("close")],2),i("a",{staticClass:"full-height column cursor-pointer g-card-no-deco",class:{"g-card-hover":t.$q.screen.gt.sm,"g-border-light rounded-borders":t.bordered||t.$q.screen.gt.sm},attrs:{href:t.customRoute},on:{click:t.onNavigate}},[t.offerImageSrc?i("div",{staticClass:"q-px-md q-pt-md"},[i("q-img",{staticStyle:{height:"150px"},attrs:{src:t.offerImageSrc,contain:""},scopedSlots:t._u([{key:"error",fn:function(){return[i("q-img",{staticClass:"g-img-error",staticStyle:{height:"150px"},attrs:{src:t.defaultImageSrc,contain:""}})]},proxy:!0}],null,!1,483955699)})],1):t._e(),i("div",{staticClass:"q-pa-md"},[i("div",{staticClass:"text-body1 text-word-break ellipsis-2-lines"},[t.item.region_id?i("q-avatar",{staticClass:"g-avatar-outlined q-mr-xs",attrs:{size:"12px"}},[i("q-icon",{attrs:{size:"12px",name:"img:img/region-flags/"+t.$options.filters.toLowerCase(t.$kwHelper.toName(t.item.region_id,"en"))+".svg"}})],1):t._e(),i("span",[t._v("\n          "+t._s(t.offerTitle)+"\n        ")])],1)]),i("q-space"),i("div",{staticClass:"q-px-md q-pb-md text-body2"},[i("div",{staticClass:"row q-gutter-sm"},[t.hasUniqueSetting?t._e():[i("div",{staticClass:"g-chip-counter"},[t._v("\n            "+t._s(t.$t("landing.min_purchase"))+"\n            "+t._s(t._f("formatNumberShort")(t.item.min_qty))+"\n          ")]),i("div",{staticClass:"g-chip-counter"},[t._v("\n            "+t._s(t.$t("landing.stock"))+"\n            "+t._s(t._f("formatNumberShort")(t.item.available_qty))+"\n          ")])],i("div",{staticClass:"g-chip-counter row items-center"},[i("q-icon",{staticClass:"q-mr-xs",attrs:{name:"schedule",color:"secondary",size:"16px"}}),i("div",[t._v("\n            "+t._s(0===t.item.delivery_eta?t.$t("offer.instant"):t.$t("landing.offer_delivery_eta",{eta:t.item.delivery_eta}))+"\n          ")])],1)],2)]),i("div",{staticClass:"q-px-md q-pb-md row items-center no-wrap"},[i("g-user-info-box",{attrs:{item:t.item}}),i("q-space"),t.item.is_expired?i("q-badge",{staticClass:"text-caption q-py-xs q-px-sm",attrs:{outline:"",color:"primary",label:t.$t("landing.expired")}}):t.item.is_sold_out?i("div",{staticClass:"text-body1 text-secondary"},[t._v("\n        "+t._s(t.$t("landing.sold_out"))+"\n      ")]):i("div",[i("div",{staticClass:"row items-baseline justify-end"},[i("div",{staticClass:"text-body1 text-weight-medium"},[t._v("\n            "+t._s(t._f("formatNumber")(t.item.display_price))+"\n          ")]),i("div",{staticClass:"text-caption q-ml-xs"},[t._v("\n            "+t._s(t.item.display_currency)+"\n          ")])])])],1)],1),t.$q.screen.lt.sm?i("q-separator"):t._e()],1)},Lt=[],zt=i("2d72"),Mt={components:{GUserInfoBox:zt["a"]},props:{item:Object,bordered:Boolean,hideImage:Boolean},computed:{hasUniqueSetting(){const{service_id:t}=this.$kwHelper.findCategory(this.$route.params.seoTerm),{admin_settings:e={}}=this.$store.getters["landing/viewServiceSetting"](t),{service_type:i=""}=e;return"unique"===i},defaultImageSrc(){return i("841f")},offerImageSrc(){const{gallery_images:t}=this.item;return!t||this.hideImage?null:t[0]?t[0]:this.defaultImageSrc},offerTitle(){const{title:t}=this.item,e=t.replace(/&amp;/g,"&");return e.replace(/&gt;/g,">")},category(){const t=this.$kwHelper.findCategory(this.$route.params.seoTerm),{service_id:e,brand_id:i,marketing_title:s=""}=t,r=s[this.$i18n.locale]||this.$kwHelper.toName(i),n=this.$kwHelper.toKeywordTerm(e),a=`${window.location.protocol}//${window.location.host}/img/service-icons/g2g-${n}.svg`;return o()(o()({},t),{},{pageTitle:r,pageIcon:a})},isGcOffer(){const{offer_id:t}=this.item;return t.startsWith("G")},customRoute(){const{service_id:t,brand_id:e,region_id:i,offer_id:s,title:r="-"}=this.item,{seller:n}=this.$route.query;let a="";if(this.isGcOffer){const r=this.$kwHelper.toSeoTerm(t,e),l=this.iconicPath({name:"precheckout-single",params:{seoTerm:r,offerId:s},query:o()(o()({},i&&{region_id:i}),n&&{seller:n})}),c=this.$router.resolve(l);a=c.href}else{const l=r.replace(/[\W]/g,"-"),c=o()(o()(o()({service_id:t,brand_id:e},i&&{region_id:i}),n&&{seller:n}),{},{offer_id:s}),d=new URLSearchParams(c).toString();a=`https://www.g2g.com/offer/${l}?${d}`}return a}},methods:{onNavigate(t){this.isGcOffer&&(t.preventDefault(),this.$router.push(this.customRoute))}}},Ut=Mt,Jt=i("58a81"),Wt=Object(x["a"])(Ut,Pt,Lt,!1,null,null,null),Vt=Wt.exports;w()(Wt,"components",{QImg:Et["a"],QAvatar:Z["a"],QIcon:D["a"],QSpace:J["a"],QBadge:Jt["a"],QSeparator:F["a"]});var Kt={mixins:[c["a"]],components:{GErrorSection:g["a"],GCategorySearchFilterSection:bt,GCategorySort:Ot,GOfferItemSkeleton:Nt,GOfferGroupItem:Ht,GOfferItem:Vt},computed:o()(o()({},Object(a["c"])({loading:t=>t.util.loading,offerTotal:t=>t.landing.offerTotal,offers:t=>t.landing.offers})),{},{pagination(){const t=48,e=Math.ceil(25),i=Math.ceil(this.offerTotal/t),s=i>e?e:i;return{page:Number(this.$route.query.page||1),perPage:t,max:s,maxDisplay:e}}}),methods:{onPaginate(t){if(t===this.pagination.page)return;const e=o()({},this.$route.query);e.page=t,this.$router.replace({query:e}).catch((()=>{}))}}},Xt=Kt,Yt=i("3b16"),Zt=Object(x["a"])(Xt,u,p,!1,null,null,null),te=Zt.exports;w()(Zt,"components",{QSpace:J["a"],QSeparator:F["a"],QPagination:Yt["a"]});var ee=i("c98f"),ie=i("5b50"),se={mixins:[c["a"]],components:{GSearchToolPortal:d["a"],GOfferSection:te,GSwiper:ee["a"],GNavTreeItem:ie["a"]},metaInfo(){return{title:this.metaTag.meta_title,meta:[{vmid:"description",name:"description",content:this.metaTag.meta_description},{vmid:"keywords",name:"keywords",content:this.metaTag.meta_keyword}],script:[{type:"application/ld+json",json:{"@context":"http://schema.org","@type":"Product",name:this.metaTag.meta_title,description:this.metaTag.meta_description,sku:this.$route.params.seoTerm,mpn:this.$route.params.seoTerm,brand:{"@type":"Service",name:this.category.pageTitle},aggregateRating:{"@type":"AggregateRating",ratingValue:"4.8",reviewCount:"28465"},image:this.category.pageIcon}}]}},data(){return{hoveredServiceId:"",isAllowCrossSelling:!1}},computed:o()(o()({},Object(a["c"])({loading:t=>t.util.loading,relatedNavTreeItems:t=>t.landing.relatedNavTreeItems,relatedBrands:t=>t.landing.relatedBrands,seoMeta:t=>t.landing.seoMeta})),{},{metaTag(){const{seo_meta:t={}}=this.seoMeta,{meta_title:e={},meta_description:i={},meta_keyword:s={}}=t;return{meta_title:e[this.$i18n.locale]||e.en,meta_description:i[this.$i18n.locale]||i.en,meta_keyword:s[this.$i18n.locale]||s.en}},seoDescription(){const{marketing_description:t={}}=this.seoMeta;return t[this.$i18n.locale]||t.en},sellerStoreUrl(){return`https://www.g2g.com/${this.$route.query.seller}/store`},rootId(){const{service_id:t}=this.category,{root_id:e}=this.relatedNavTreeItems.find((e=>e.service_id===t));return e||""},category(){const t=this.$kwHelper.findCategory(this.$route.params.seoTerm),{service_id:e,brand_id:i,marketing_title:s=""}=t,r=s[this.$i18n.locale]||this.$kwHelper.toName(i),n=this.$kwHelper.toKeywordTerm(e),a=`${window.location.protocol}//${window.location.host}/img/service-icons/g2g-${n}.svg`;return o()(o()({},t),{},{pageTitle:r,pageIcon:a})},relatedItems(){const t=this.relatedNavTreeItems.map((t=>{const{total_result:e}=t,i=this.$navHelper.findNavItem(t.cat_id);return o()(o()(o()({},t),i),{},{total_offer:e,path:this.constructRelatedNavItemUrl(t.service_id)})}));return this.$navHelper.sortNavItems(t)}}),watch:{$route:{handler:"fetch",deep:!0},"$route.params.seoTerm":{handler:"fetchBySeoTerm",immediate:!0}},methods:{constructRegionUrl(t){const{seller:e}=this.$route.query;return o()({region_id:t},e&&{seller:e})},constructRelatedNavItemUrl(t){const{seller:e}=this.$route.query,i=this.$kwHelper.toSeoTerm(t,this.category.brand_id),s=l["b"].viewSeoFilterDetail(i),r=o()(o()({},!e&&o()({},s)),{},{seller:e});return this.iconicPath({name:"landing-category",params:{seoTerm:i},query:r})},constructRelatedBrandUrl(t){const{seller:e}=this.$route.query,i=this.$kwHelper.toSeoTerm(this.category.service_id,t),s=l["b"].viewSeoFilterDetail(i),r=o()(o()({},!e&&o()({},s)),{},{seller:e});return this.iconicPath({name:"landing-category",params:{seoTerm:i},query:r})},async fetch(){this.$route.query.seller||this.updateBrowserStorage();const{service_id:t,brand_id:e}=this.category,{region_id:i,seller:s}=this.$route.query;let r={service_id:t,brand_id:e,region_id:i},n=[];const a=this.$store.dispatch("landing/fetchAttributes",r);n.push(a);const{q:l,budget_to:c,include_offline:d,page:u}=this.$route.query;r=o()(o()(o()(o()(o()(o()(o()({},r),l&&{q:l}),{},{sort:this.selectedSort},this.selectedFa&&{filter_attr:this.selectedFa}),c&&{budget_to:c}),0===Number(d)&&{include_offline:d}),u&&{page:u}),s&&{seller:s});const p=this.$store.dispatch("landing/viewOfferTotal",r);n.push(p);const g=this.$store.dispatch("landing/fetchOffers",r);n.push(g),await Promise.all(n)},async fetchBySeoTerm(){const{service_id:t,brand_id:e}=this.category,{seller:i}=this.$route.query,s={service_id:t,brand_id:e};let r=[];const n=this.$store.dispatch("landing/viewSeoMeta",s);r.push(n);const a=this.$store.dispatch("landing/fetchRelatedBrands",s);r.push(a);const c=this.$store.dispatch("landing/fetchRegions",s);r.push(c);const d=this.$store.dispatch("landing/fetchRelatedNavTreeItems",o()(o()({brand_id:e},i&&{seller:i}),{},{include_total_result:1}));r.push(d),await Promise.all(r);const{seoTerm:u}=this.$route.params;l["a"].add({seo_term:u,root_id:this.rootId});const{is_allow_cross_selling:p}=this.$navHelper.findNavItem(this.rootId);this.isAllowCrossSelling=p}},beforeRouteEnter(t,e,i){i((async e=>{try{if(Object.entries(t.query).length)throw new Error("Using query string");const{seoTerm:i}=t.params,s=l["b"].viewSeoFilterDetail(i);await e.$router.replace({query:s})}catch(i){e.fetch()}}))}},re=se,ne=(i("9c19"),i("4983")),oe=Object(x["a"])(re,s,r,!1,null,"3d0657a4",null);e["default"]=oe.exports;w()(oe,"components",{QBtn:R["a"],QSpace:J["a"],QSeparator:F["a"],QScrollArea:ne["a"]})},"8d17":function(t,e,i){"use strict";i("0e68")},"9c19":function(t,e,i){"use strict";i("ca86")},ca86:function(t,e,i){}}]);